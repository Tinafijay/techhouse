<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Tech House | Poisoning Detector</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="poisoning detector styles.css">
</head>
<body>

    <audio id="vista-chime" src="vista_startup.mp3" preload="auto"></audio>

    <div id="tour-overlay">
        <h1 id="tour-title" style="color:var(--primary)"></h1>
        <p id="tour-desc" style="padding: 20px;"></p>
        <button class="main-btn" style="width:150px" onclick="nextTourStep()">Continue</button>
    </div>

    <div class="app-container">
        <div class="tab-content" style="flex:1;">
            
            <div id="panel-scan" class="tab-pane active">
                <div style="padding: 20px; text-align: center;">
                    <h2 style="color:var(--primary)">Scanner</h2>
                    <div class="viewport"><video id="cam-feed" autoplay playsinline muted></video></div>
                    <button class="main-btn" onclick="processScan()">ANALYZE SAMPLE</button>
                    <div id="status-text" style="padding:15px; font-weight:bold;">Ready</div>
                </div>
            </div>

            <div id="panel-history" class="tab-pane">
                <div style="padding: 20px;">
                    <h2 style="color:var(--primary)">History</h2>
                    <div style="display:flex; gap:10px;">
                        <button class="secondary-btn" style="flex:1" onclick="downloadFullPDF()">Export PDF</button>
                        <button class="secondary-btn" style="color:red; border-color:red" onclick="clearHistory()">Wipe</button>
                    </div>
                    <div id="history-list"></div>
                </div>
            </div>

            <div id="panel-settings" class="tab-pane">
                <div style="padding: 20px;">
                    <h2 style="color:var(--primary)">Settings</h2>
                    <div class="card">
                        <div class="row"><span>Audio</span><label class="switch"><input type="checkbox" id="sound-toggle"><span class="slider"></span></label></div>
                        <div class="row"><span>Vibe</span><label class="switch"><input type="checkbox" id="vibe-toggle"><span class="slider"></span></label></div>
                        <hr>
                        <label>Theme</label>
                        <select id="theme-select" class="input-field" onchange="updateTheme(this.value)">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="midnight">Midnight</option>
                        </select>
                        <label>API Key</label>
                        <input type="password" id="api-key" class="input-field" placeholder="Gemini Key">
                        <button class="main-btn" onclick="saveKey()">Save</button>
                        <button class="secondary-btn" style="width:100%" onclick="startTour()">Restart Tour</button>
                    </div>
                </div>
            </div>
        </div>

        <nav class="tab-bar">
            <button id="nav-scan" class="tab-btn active" onclick="switchTab('panel-scan', this)"><span>üì∑</span>SCAN</button>
            <button id="nav-history" class="tab-btn" onclick="switchTab('panel-history', this)"><span>üìú</span>HISTORY</button>
            <button id="nav-settings" class="tab-btn" onclick="switchTab('panel-settings', this)"><span>‚öôÔ∏è</span>SETTINGS</button>
        </nav>
    </div>

    <script src="poisoning detector script.js"></script>
</body>
</html>